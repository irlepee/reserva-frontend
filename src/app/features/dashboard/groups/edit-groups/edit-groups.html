<div class="main-container">
    <div class="top-section">
        <h2>Editar grupo</h2>
        <p>Completa los detalles para configurar tu grupo</p>
    </div>

    <form *ngIf="!isLoading" (ngSubmit)="actualizarGrupo()">
        <p>Nombre del grupo</p>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="groupName" placeholder="Nombre del grupo" [(ngModel)]="groupName" name="groupName" required>
            <label for="groupName">Nombre del grupo</label>
        </div>

        <p>Descripción del grupo (Opcional)</p>
        <div class="form-floating mb-3">
            <textarea class="form-control" id="groupDescription" placeholder="Descripción del grupo" [(ngModel)]="groupDescription" name="groupDescription"
                style="height: 100px;" required></textarea>
            <label for="groupDescription">Descripción del grupo</label>
        </div>

        <div class="color-selector-section">
            <p>Selecciona un color para el grupo</p>
            <div class="color-options">
                <div *ngFor="let color of colors" class="color-option" [class.selected]="selectedColor === color.id" (click)="selectedColor = color.id">
                    <div class="color-circle" [style.backgroundColor]="color.hex"></div>
                    <span>{{ color.name }}</span>
                    <i class="bi bi-check-circle-fill" *ngIf="selectedColor === color.id"></i>
                </div>
            </div>
        </div>

        <div class="invite-section">
            <p>Invitar miembros al grupo</p>
            <div class="form-floating mb-3">
                <input type="email" class="form-control" id="inviteEmail" placeholder="Correo electrónico" [(ngModel)]="identifier" name="inviteEmail">
                <label for="inviteEmail">Ingresa el nombre de usuario o el correo electrónico de la persona a invitar</label>
            </div>
            <button type="button" class="btn btn-secondary mb-3" (click)="agregarMiembro()" [disabled]="isLoadingInvite">
              {{ isLoadingInvite ? 'Agregando...' : 'Agregar miembro' }}
            </button>
        </div>

        <!-- Lista de miembros invitados -->
        <div class="invited-members-section" *ngIf="invitedMembers.length > 0">
            <p><strong>Miembros invitados ({{ invitedMembers.length }})</strong></p>
            <div class="invited-members-list">
                <div class="invited-member" *ngFor="let member of invitedMembers; let i = index">
                    <div class="member-info">
                        <i class="bi bi-person-circle"></i>
                        <span>{{ member }}</span>
                    </div>
                    <button type="button" class="btn-remove" (click)="quitarMiembro(i)" title="Remover">
                        <i class="bi bi-x-circle"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Sección de miembros (será implementada por el usuario) -->
        <div class="members-section">
            <p><strong>Miembros del grupo</strong></p>
            <div class="members-list">
                <!-- TODO: Implementar lista de miembros actuales -->
                <p class="placeholder">Los miembros se cargarán aquí</p>
            </div>
        </div>

        <button type="submit" class="btn btn-primary">Actualizar grupo</button>
        <p class="confirmP">Se actualizará la información del grupo</p>
    </form>

    <div *ngIf="isLoading" class="loading">
        <p>Cargando grupo...</p>
    </div>

</div>
