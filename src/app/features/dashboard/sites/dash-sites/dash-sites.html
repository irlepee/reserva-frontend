<div class="main-container">

  <div class="top-section">
    <div class="top-left">
      <h2>Mis sitios</h2>
    </div>
    <button routerLink="create" class="create-button" title="Crear nuevo sitio">+ Crear sitio</button>  
  </div>

  <p class="subtitle">Gestiona la información, recursos y estadísticas de tus sitios.</p>

  <div class="search-bar">
    <i class="bi bi-search"></i>
    <input type="text" placeholder="Buscar por nombre..." [(ngModel)]="search" (input)="filtrarPorNombre()">
  </div>

  <div class="sites-section">
    <div *ngIf="sitesFiltered.length === 0" class="empty-state">
      <p>Aún no tienes sitios creados</p>
      <button routerLink="create" class="create-button-empty">+ Crear tu primer sitio</button>
    </div>

    <div class="sites-grid">
      <div class="site-card" *ngFor="let site of sitesFiltered"
        [style.backgroundImage]="'url(' + getImageUrl(site.images) + ')'"
        title="{{ site.name }}">
        <div class="site-overlay">
          <div class="site-info">
            <h3 class="site-name">{{ site.name }}</h3>
            <p class="site-resources">{{ getResourcesCount(site.id) }} Recursos</p>
          </div>
          <div class="site-actions">
            <button class="btn-action" title="Editar Info" (click)="goToEditSite(site.id)">
              <i class="bi bi-pencil"></i> Editar Info
            </button>
            <button class="btn-action" title="Editar Recursos" (click)="goToManageResources(site.id)">
              <i class="bi bi-boxes"></i> Editar Recursos
            </button>
            <button class="btn-action" title="Administrar Sitio" (click)="goToManageSite(site.id)">
              <i class="bi bi-gear"></i> Administrar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>